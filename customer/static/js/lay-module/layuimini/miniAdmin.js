layui.define(["jquery","miniMenu","element","miniTab","miniTheme"],function(a){var c=layui.$,e=layui.layer,f=layui.miniMenu,b=layui.miniTheme,d=layui.element,h=layui.miniTab;if(!/http(s*):\/\//.test(location.href)){var g="请先将项目部署至web容器（Apache/Tomcat/Nginx/IIS/等），否则部分数据将无法显示";return e.alert(g)}var i={render:function(j){j.iniUrl=j.iniUrl||null;j.clearUrl=j.clearUrl||null;j.urlHashLocation=j.urlHashLocation||false;j.bgColorDefault=j.bgColorDefault||0;j.multiModule=j.multiModule||false;j.menuChildOpen=j.menuChildOpen||false;j.loadingTime=j.loadingTime||1;j.pageAnim=j.pageAnim||false;j.maxTabNum=j.maxTabNum||20;c.getJSON(j.iniUrl,function(k){if(k==null){i.error("暂无菜单信息")}else{i.renderLogo(k.logoInfo);i.renderClear(j.clearUrl);i.renderHome(k.homeInfo);i.renderAnim(j.pageAnim);i.listen();f.render({menuList:k.menuInfo,multiModule:j.multiModule,menuChildOpen:j.menuChildOpen});h.render({filter:"layuiminiTab",urlHashLocation:j.urlHashLocation,multiModule:j.multiModule,menuChildOpen:j.menuChildOpen,maxTabNum:j.maxTabNum,menuList:k.menuInfo,homeInfo:k.homeInfo,listenSwichCallback:function(){i.renderDevice()}});b.render({bgColorDefault:j.bgColorDefault,listen:true,});i.deleteLoader(j.loadingTime)}}).fail(function(){i.error("菜单接口有误")})},renderLogo:function(k){var j='<a href="'+k.href+'"><img src="'+k.image+'" alt="logo"><h1>'+k.title+"</h1></a>";c(".layuimini-logo").html(j)},renderHome:function(j){sessionStorage.setItem("layuiminiHomeHref",j.href);c("#layuiminiHomeTabId").html('<span class="layuimini-tab-active"></span><span class="disable-close">'+j.title+'</span><i class="layui-icon layui-unselect layui-tab-close">ဆ</i>');c("#layuiminiHomeTabId").attr("lay-id",j.href);c("#layuiminiHomeTabIframe").html('<iframe width="100%" height="100%" frameborder="no" border="0" marginwidth="0" marginheight="0"  src="'+j.href+'"></iframe>')},renderClear:function(j){c(".layuimini-clear").attr("data-href",j)},renderAnim:function(j){if(j){c("#layuimini-bg-color").after('<style id="layuimini-page-anim">'+".layui-tab-item.layui-show {animation:moveTop 1s;-webkit-animation:moveTop 1s;animation-fill-mode:both;-webkit-animation-fill-mode:both;position:relative;height:100%;-webkit-overflow-scrolling:touch;}\n"+"@keyframes moveTop {0% {opacity:0;-webkit-transform:translateY(30px);-ms-transform:translateY(30px);transform:translateY(30px);}\n"+"    100% {opacity:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}\n"+"}\n"+"@-o-keyframes moveTop {0% {opacity:0;-webkit-transform:translateY(30px);-ms-transform:translateY(30px);transform:translateY(30px);}\n"+"    100% {opacity:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}\n"+"}\n"+"@-moz-keyframes moveTop {0% {opacity:0;-webkit-transform:translateY(30px);-ms-transform:translateY(30px);transform:translateY(30px);}\n"+"    100% {opacity:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}\n"+"}\n"+"@-webkit-keyframes moveTop {0% {opacity:0;-webkit-transform:translateY(30px);-ms-transform:translateY(30px);transform:translateY(30px);}\n"+"    100% {opacity:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}\n"+"}"+"</style>")}},fullScreen:function(){var j=document.documentElement;var k=j.requestFullScreen||j.webkitRequestFullScreen;if(typeof k!="undefined"&&k){k.call(j)}else{if(typeof window.ActiveXObject!="undefined"){var l=new ActiveXObject("WScript.Shell");if(l!=null){l.SendKeys("{F11}")}}else{if(j.msRequestFullscreen){j.msRequestFullscreen()}else{if(j.oRequestFullscreen){j.oRequestFullscreen()}else{if(j.webkitRequestFullscreen){j.webkitRequestFullscreen()}else{if(j.mozRequestFullScreen){j.mozRequestFullScreen()}else{i.error("浏览器不支持全屏调用！")}}}}}}},exitFullScreen:function(){var k=document;var j=k.cancelFullScreen||k.webkitCancelFullScreen||k.exitFullScreen;if(typeof j!="undefined"&&j){j.call(k)}else{if(typeof window.ActiveXObject!="undefined"){var l=new ActiveXObject("WScript.Shell");if(l!=null){l.SendKeys("{F11}")}}else{if(k.msExitFullscreen){k.msExitFullscreen()}else{if(k.oRequestFullscreen){k.oCancelFullScreen()}else{if(k.mozCancelFullScreen){k.mozCancelFullScreen()}else{if(k.webkitCancelFullScreen){k.webkitCancelFullScreen()}else{i.error("浏览器不支持全屏调用！")}}}}}}},renderDevice:function(){if(i.checkMobile()){c(".layuimini-tool i").attr("data-side-fold",1);c(".layuimini-tool i").attr("class","fa fa-outdent");c(".layui-layout-body").removeClass("layuimini-mini");c(".layui-layout-body").addClass("layuimini-all")}},deleteLoader:function(j){setTimeout(function(){c(".layuimini-loader").fadeOut()},j*1000)},success:function(j){return e.msg(j,{icon:1,shade:this.shade,scrollbar:false,time:2000,shadeClose:true})},error:function(j){return e.msg(j,{icon:2,shade:this.shade,scrollbar:false,time:3000,shadeClose:true})},checkMobile:function(){var l=navigator.userAgent.toLocaleLowerCase();var j=navigator.platform.toLocaleLowerCase();var m=(/android/i).test(l)||((/iPhone|iPod|iPad/i).test(l)&&(/linux/i).test(j))||(/ucweb.*linux/i.test(l));
var k=(/iPhone|iPod|iPad/i).test(l)&&!m;var n=(/Windows Phone|ZuneWP7/i).test(l);var o=document.documentElement.clientWidth;if(!m&&!k&&!n&&o>1024){return false}else{return true}},listen:function(){c("body").on("click","[data-clear]",function(){var k=e.load(0,{shade:false,time:2*1000});sessionStorage.clear();var j=c(this).attr("data-href");if(j!=undefined&&j!=""&&j!=null){c.getJSON(j,function(m,l){e.close(k);if(m.code!=1){return i.error(m.msg)}else{return i.success(m.msg)}}).fail(function(){e.close(k);return i.error("清理缓存接口有误")})}else{e.close(k);return i.success("清除缓存成功")}});c("body").on("click","[data-refresh]",function(){c(".layui-tab-item.layui-show").find("iframe")[0].contentWindow.location.reload();i.success("刷新成功")});c("body").on("mouseenter",".layui-nav-tree .menu-li",function(){if(i.checkMobile()){return false}var l=c(this).attr("class"),j=c(this).prop("innerHTML"),k=c(".layuimini-tool i").attr("data-side-fold");if(k==0&&j){j="<ul class='layuimini-menu-left-zoom layui-nav layui-nav-tree layui-this'><li class='layui-nav-item layui-nav-itemed'>"+j+"</li></ul>";window.openTips=e.tips(j,c(this),{tips:[2,"#2f4056"],time:300000,skin:"popup-tips",success:function(m){var n=c(m).position().left-10;c(m).css({left:n});d.render()}})}});c("body").on("mouseleave",".popup-tips",function(){if(i.checkMobile()){return false}var j=c(".layuimini-tool i").attr("data-side-fold");if(j==0){try{e.close(window.openTips)}catch(k){console.log(k.message)}}});c("body").on("click","[data-check-screen]",function(){var j=c(this).attr("data-check-screen");if(j=="full"){i.fullScreen();c(this).attr("data-check-screen","exit");c(this).html('<i class="fa fa-compress"></i>')}else{i.exitFullScreen();c(this).attr("data-check-screen","full");c(this).html('<i class="fa fa-arrows-alt"></i>')}});c("body").on("click",".layuimini-make",function(){i.renderDevice()})}};a("miniAdmin",i)});